groups:
- name: opentelemetry-demo-alerts
  rules:
  - alert: HighRequestLatency
    expr: histogram_quantile(0.99, sum by (le, service_name) (rate(http_server_duration_seconds_bucket[5m]))) > 0.5
    for: 1m
    labels:
      severity: critical
    annotations:
      summary: "High request latency detected for {{ $labels.service_name }}"
      description: "The 99th percentile of HTTP request duration for service {{ $labels.service_name }} has exceeded 0.5 seconds for more than 1 minute."